{% load static %}

<nav id="topNav" class="top-nav shadow-sm">

    <!-- LEFT SECTION -->
    <div class="nav-left">
        <button id="toggleSidebar" class="nav-btn">
            <i class="fa-solid fa-bars"></i>
        </button>

        <a href="{% url 'dashboard:home' %}" class="brand">
            <img src="{% static 'images/logo.svg' %}" alt="AcoCheck" class="brand-logo">
            <span class="brand-text">AcoCheck</span>
        </a>
    </div>

    <!-- RIGHT SECTION -->
    <div class="nav-right">

        <!-- ROLE BADGE -->
        <span class="role-badge">
            {{ user.role|title }}
        </span>

        <!-- USER DROPDOWN -->
        <div class="user-menu" id="userMenu">
            <img src="{% static 'images/avatar.svg' %}" class="user-avatar" alt="User">

            <div id="dropdown" class="dropdown-menu">
                <div class="dropdown-header">
                    <img src="{% static 'images/avatar.svg' %}" class="dropdown-avatar">
                    <div>
                        <strong>{{ user.username|title }}</strong><br>
                        <small>{{ user.email }}</small>
                    </div>
                </div>

                <div class="dropdown-divider"></div>

                <a href="{% url 'accounts:profile' %}">
                    <i class="fa-solid fa-user"></i> Profile
                </a>

                <a href="{% url 'accounts:logout' %}" class="logout">
                    <i class="fa-solid fa-right-from-bracket"></i> Logout
                </a>
            </div>
        </div>

    </div>

</nav>
<script>
document.addEventListener("DOMContentLoaded", function () {

    const userMenu = document.getElementById("userMenu");
    const dropdown = document.getElementById("dropdown");

    userMenu.addEventListener("click", function (e) {
        dropdown.classList.toggle("show");
        e.stopPropagation();
    });

    // Close when clicking outside
    document.addEventListener("click", function () {
        dropdown.classList.remove("show");
    });

});
</script>

